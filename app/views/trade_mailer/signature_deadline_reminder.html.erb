<!DOCTYPE html>
<html>
<head>
  <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
</head>
<body style="font-family: Arial, sans-serif; line-height: 1.6; color: #333;">
  <div style="max-width: 600px; margin: 0 auto; padding: 20px;">
    <h2 style="color: #ef4444;">⚠️ Urgent: Agreement Expires in 24 Hours</h2>

    <p>Hi <%= @recipient.name %>,</p>

    <p><strong>This is a reminder that the trade agreement for Trade #<%= @trade.id %> will expire soon.</strong></p>

    <div style="background-color: #fef2f2; padding: 15px; border-radius: 5px; border-left: 4px solid #ef4444; margin: 20px 0;">
      <h3 style="margin-top: 0; color: #ef4444;">Time Sensitive</h3>
      <% if @trade_document&.expires_at.present? %>
        <p><strong>Deadline:</strong> <%= l(@trade_document.expires_at, format: :long) %></p>
      <% end %>
      <p style="margin-bottom: 0;">If the agreement is not signed by the deadline, this trade will be automatically cancelled.</p>
    </div>

    <div style="background-color: #f3f4f6; padding: 15px; border-radius: 5px; margin: 20px 0;">
      <h3 style="margin-top: 0;">Trade Details</h3>
      <p><strong>Item:</strong> <%= @trade.item&.name %></p>
      <p><strong>Amount:</strong> <%= number_to_currency(@trade.price / 100.0) %></p>
      <% if @trade.awaiting_buyer_signature? %>
        <p><strong>Waiting for:</strong> Buyer's signature</p>
      <% elsif @trade.awaiting_seller_signature? %>
        <p><strong>Waiting for:</strong> Seller's signature</p>
      <% end %>
    </div>

    <p><strong>Action Required:</strong></p>
    <ul>
      <li>Sign the agreement before the deadline</li>
      <li>Review all terms carefully</li>
      <li>Contact the other party if you have questions</li>
    </ul>

    <div style="margin: 30px 0;">
      <% if @trade_document.present? %>
        <%= link_to "Sign Agreement Now", signing_url_trade_url(@trade), style: "display: inline-block; background-color: #ef4444; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; font-weight: bold;" %>
      <% else %>
        <%= link_to "View Trade", trade_url(@trade), style: "display: inline-block; background-color: #ef4444; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px;" %>
      <% end %>
    </div>

    <p style="color: #6b7280; font-size: 14px;">
      Don't lose this opportunity! Sign the agreement now to proceed with the trade.
    </p>
  </div>
</body>
</html>
